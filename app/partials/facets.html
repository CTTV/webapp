<div class="cttv-facets">

    <!-- User selections -->
    <div ng-show="selectedFilters.length>0" class="cttv-facets-selected-summary">
        <h4>Your filters</h4>
        <div class="cttv-facets-controls">
            <span ng-click="deselectAll()">Clear all <i class="fa fa-times"></i></span>
        </div>
        <div ng-repeat="collection in selectedFilters">
            <h5>{{collection.label | clearUnderscores | upperCaseFirst}}</h5>
            <div class="checkbox" ng-repeat="bucket in collection.filters" ng-click="bucket.toggle()" style="cursor:pointer" title="Remove filter">
                <i class="fa fa-times-circle"></i> {{bucket.label}}
            </div>
        </div>
    </div>
    <!-- Facets and filters -->
    <h4>Filter by</h4>
    <accordion close-others=false>
        <accordion-group ng-init="status = {isOpen: true}" is-open="status.isOpen" ng-repeat="filter in filters" ng-if="filter.filters.length>0">
            <accordion-heading class="cttv-facets-headers">
                {{filter.label | clearUnderscores | upperCaseFirst}} <i class="pull-right text-lowlight fa" ng-class="{'fa-plus-square': !status.isOpen, 'fa-minus-square': status.isOpen}"></i>
            </accordion-heading>

            <div class="cttv-facets-controls">
                <span ng-click="filter.selectAll(false)">Clear all <i class="fa fa-times"></i></span>
                <span ng-click="filter.selectAll(true)">Select all <i class="fa fa-check"></i></span>
            </div>
            <div class="checkbox" ng-repeat="bucket in filter.filters">
                <label ng-class="(!bucket.enabled) ? 'disabled' : ''">
                    <input type="checkbox"
                        value="{{bucket.id}}"
                        ng-checked="bucket.selected"
                        ng-disabled="!bucket.enabled"
                        ng-click="bucket.toggle()" >
                    {{bucket.label}} <span class="text-lowlight small">({{bucket.count | metricPrefix:1}})</span>
                </label>
            </div>

        </accordion-group>
    </accordion>
</div>