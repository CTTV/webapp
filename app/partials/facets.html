<div class="cttv-facets">

    <!-- User selections -->
    <div ng-show="selectedFilters.length>0" class="cttv-facets-selected-summary">
        <h4>Your filters</h4>
        <div class="cttv-facets-controls">
            <span ng-click="deselectAll()">Clear all <i class="fa fa-times"></i></span>
        </div>
        <div ng-repeat="collection in selectedFilters">
            <h5>{{collection.label | clearUnderscores | upperCaseFirst}}</h5>
            <div class="checkbox" ng-repeat="bucket in collection.filters" ng-click="bucket.toggle()" style="cursor:pointer" title="Remove filter">
                <i class="fa fa-times-circle"></i> {{bucket.label}}
                <!-- <div ng-repeat="subfilter in bucket.collection.filters" ng-if="subfilter.selected">
                    <span>&nbsp;&nbsp;</span><i class="fa fa-times-circle"></i> {{subfilter.label}}
                </div> -->
            </div>
        </div>
    </div>
    <!-- Facets and filters -->
    <h4>Filter by</h4>
    <accordion close-others=false>
        <accordion-group ng-init="status = {isOpen: true}" is-open="status.isOpen" ng-repeat="facet in filters" ng-if="facet.filters.length>0">
            <accordion-heading class="cttv-facets-headers">
                {{facet.label | clearUnderscores | upperCaseFirst}} <i class="pull-right text-lowlight fa" ng-class="{'fa-plus-square': !status.isOpen, 'fa-minus-square': status.isOpen}"></i>
            </accordion-heading>


            <div cttv-datatypes-facet facet='facet' ng-if="facet.key=='datatypes'"></div>

            <div cttv-pathways-facet facet='facet' ng-if="facet.key=='pathway_type'"></div>


        </accordion-group>
    </accordion>
</div>