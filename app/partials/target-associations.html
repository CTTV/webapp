<!-- search app / results -->

<div>
  <h3><span view-title>Diseases associated with {{search.label}}</span> <small>({{search.query}}) <a href="#/target/{{search.query}}">View target profile</a></small></h3>
  <div class="h6">Found {{nresults}} evidence</div>

  <div class="row">
    
    <div class="col-md-2 cttv-facet">
      <accordion>
	<accordion-group>
	  <accordion-heading>
	    <span ng-click="toggleDataTypes()">Data types</span>
	  </accordion-heading>
	  <div class="checkbox">
	    <label ng-repeat="dataType in dataTypes">
	      <input type="checkbox"
		     value="{{dataType.name}}"
		     ng-click="filterDataType(dataType)"
		     ng-checked="dataType.selected">
		     <!-- ng-checked="currentDataTypes.indexOf(dataType) > -1"> -->
		     {{dataType.name | clearUnderscores | upperCaseFirst}}
	    </label>
	  </div>	    
	</accordion-group>

	<accordion-group is-open="tagroup.open">
	  <accordion-heading>
	    <span ng-click="toggleNavigation()">Therapeutic Areas Navigation</span>
	  </accordion-heading>
	  <accordion>
	    <!-- <div ng-repeat="ta in therapeuticAreas"> -->
	    <accordion-group ng-repeat="ta in therapeuticAreas" class="therapeuticArea" is-open="tagroup.tas[ta.name]">
	      <!-- <accordion-group class="therapeuticArea" is-open="tagroup.tas[ta.name]"> -->
		<accordion-heading>
		  <span id="cttv_targetAssociations_navBar_{{ta.name}}" ng-click="selectTherapeuticArea(ta.name)">{{ta.label}} ({{ta.children.length}})</span>
		</accordion-heading>
		<accordion>
		  <accordion-group ng-repeat="d in ta.children" class="cttv-accordion-leaf">
		    <accordion-heading>
		      <span ng-click="selectDisease(d.name)">{{d.label}}</span>
		    </accordion-heading>
		  </accordion-group>
		</accordion>
	      </accordion-group>
	    <!-- </div> -->
	  </accordion>
	</accordion-group>
      </accordion>
    </div>

    <div class="col-md-8">
      <i class="fa fa-picture-o fa-2x cttv-change-view" ng-click="setDisplay('bubbles')"></i>
      <i class="fa fa-table fa-2x cttv-change-view" ng-click="setDisplay('table')"></i>
      <i class="fa fa-picture-o fa-2x cttv-change-view" ng-click="setDisplay('tree')"></i>
      <!-- Views: [Bubbles] [Table] [Tree] -->
      <cttv-target-associations-bubbles target="{{search.query}}" focus="{{focusEFO}}" on-focus="therapeuticArea" datatypes="{{currentDataTypes}}">
      </cttv-target-associations-bubbles>
      <cttv-target-associations-table style="display:none" target="{{search.query}}">
      </cttv-target-associations-table>
      <cttv-target-associations-tree style="display:none" target="{{search.query}}">
      </cttv-target-associations-tree>
    </div>
  </div>
</div>
<!-- end search results-->
